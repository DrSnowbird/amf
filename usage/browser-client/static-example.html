<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ScalaJS</title>
</head>
<body>
<!-- Include Scala.js compiled code -->
<script type="text/javascript" src="../../amf-js/target/artifact/amf-browser.js"></script>


    <label>From:</label><select id="from" >
        <option value="raml">Raml</option>
        <option value="oas">Oas</option>
        <option value="amf">Amf</option>
    </select>

    <label>Api:</label><textarea id="api"> </textarea>

    <label>WebApi:</label><textarea id="webApi"> </textarea>

    <label>Muted WebApi:</label><textarea id="changedWebApi"></textarea>

</label>

<button id="click">Try Me!</button>

<script>

    const client = new JsClient();

    console.log("client" + client)

    document.getElementById("click").addEventListener("click", click);

    function click() {
        console.log("Clicked!");
        const pathname = document.getElementById("api").value;
        const from = document.getElementById("from").value;

        console.log("client: "+client)
        console.log("Pathname:", pathname);

        client.generateFromStream(pathname, HintMatcherHelper.matchSourceHint(from), {
            success: function (doc) {
                console.log('Success', doc);
                console.log('Success', doc.encodes);
                document.getElementById("webApi").value = doc.encodes
                console.log("passed")
                const webApiBuilder = doc.encodes.toBuilder

                webApiBuilder.withSchemes(["http","https","fakeScheme"])
                const changedWebApi = webApiBuilder.build
                document.getElementById("changedWebApi").value = changedWebApi

            },
            error: function (exception) {
                console.log('Error', exception);
            }
        });
    }
</script>

<p id="result"></p>
</body>
</html>